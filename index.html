<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Image hider by colatkinson</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Image hider</h1>
      <h2 class="project-tagline">An application in Rust that encodes files into PNG images</h2>
      <a href="https://github.com/colatkinson/image_hider" class="btn">View on GitHub</a>
      <a href="https://github.com/colatkinson/image_hider/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/colatkinson/image_hider/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="image-hider" class="anchor" href="#image-hider" aria-hidden="true"><span class="octicon octicon-link"></span></a>Image Hider</h1>

<p>An application in Rust that encodes files into PNG images</p>

<p>This project uses the Rust <a href="https://github.com/PistonDevelopers/image">image crate</a> to encode arbitrary data into image files.</p>

<h2>
<a id="why" class="anchor" href="#why" aria-hidden="true"><span class="octicon octicon-link"></span></a>Why?</h2>

<p>This provides an easy way to share files. Now you can use image hosts or imageboards.</p>

<p>Also, shits and giggles and a proof-of-concept.</p>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>To encode a file:</p>

<pre><code>$ image_hider --enc filename
$ eog filename.png
</code></pre>

<p>To decode a file:</p>

<pre><code>$ image_hider --dec filename.png
$ xdg-open filename
</code></pre>

<p>To specify a non-default file name:</p>

<pre><code>$ image_hider --enc filename -o output.png
$ eog output.png
</code></pre>

<h2>
<a id="example-output" class="anchor" href="#example-output" aria-hidden="true"><span class="octicon octicon-link"></span></a>Example Output</h2>

<p>Here's Alice in Wonderland encoded as an image.</p>

<p><img src="https://i.imgur.com/Ppk4O3O.png" alt="Alice in Wonderland"></p>

<p>Note that the images must be stored in a lossless format. Make sure to check your image host's policy on compression.</p>

<h2>
<a id="how-it-works" class="anchor" href="#how-it-works" aria-hidden="true"><span class="octicon octicon-link"></span></a>How it works</h2>

<p>Rust's image crate is capable of taking an arbitrary vector of bytes and interpretting it as pixel data. In this case, RGBA data was chosen so as to minimize the image dimensions, since each pixel contains four bytes of data.</p>

<p>To avoid the issue of deciding on appropriate image dimensions, I decided to make all images square. Thus the dimensions are determined through the equation</p>

<p><img src="http://latex.codecogs.com/svg.latex?%5Cinline%20%5Ctiny%20%5Cleft%20%5Clceil%20%5Csqrt%7B%5Cfrac%7Bsize%7D%7B4%7D%20&amp;plus;%201%7D%20%5Cright%20%5Crceil" alt="\left \lceil \sqrt{\frac{size}{4} + 1} \right \rceil"></p>

<p>This leads to a problem, however; in order to ensure that the file is square, padding must be added to the end. In order to know exactly where the padding begins, the first pixel is set aside to contain the original file size. Essentially, the file's size is stored as a 32 bit unsigned integer, and through bitwise operations, it is decomposed into four bytes. These bytes are prepended to the vector containing the provided file's data, and then the necessary padding is done.</p>

<p>This vector is then fed into a PNGEncoder, which interprets the bytes as RGBA data.</p>

<p>To decode a file, the process is essentially reversed.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/colatkinson/image_hider">Image hider</a> is maintained by <a href="https://github.com/colatkinson">colatkinson</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>

